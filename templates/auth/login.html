{% extends "base.html" %}

{% block body %}
<div class="container" style="margin-top: 100px; max-width: 400px;">
    <div class="panel panel-default {% if form.errors %}panel-danger{% elif form.is_valid() and request.POST %}panel-success{% else %}panel-primary{% endif %}">
        <div class="panel-heading">Login/Register</div>
        <div class="panel-body">
            <form method="post" class="form" action="{{ request.path }}">
                <div class="form-group {% if form.errors.name %}has-error{% endif %}">
                    {{ form.name.label_tag(attrs={'class': 'sr-only'}) }}
                    <div class="input-group" style="margin-bottom: 5px;">
                        {{ form.name.as_widget() }}
                        <span class="input-group-addon">@{{ form.name.field.domain }}</span>
                    </div>
                    {% if form.errors.name %}
                    <span class="help-block">
                        {{ form.errors.name.as_text() }}
                    </span>
                    {% endif %}
                </div>

                <div class="form-group {% if form.errors.password %}has-error{% endif %}">
                    {{ form.password.label_tag(attrs={'class': 'sr-only'}) }}
                    {{ form.password.as_widget() }}
                    {% if form.errors.password %}
                    <span class="help-block">
                        {{ form.errors.password.as_text() }}
                    </span>
                    {% endif %}
                </div>

                {% if form.non_field_errors() %}
                <div class="alert alert-danger">
                {{ form.non_field_errors().as_text() }}
                </div>
                {% endif %}

                <button class="btn btn-lg btn-primary btn-block" type="submit">Login/Register</button>
                <input type="hidden" name="next" value="{{ next }}" />
                {% csrf_token %}
            </form>
        </div>
    </div>
</div>
{% endblock body %}

